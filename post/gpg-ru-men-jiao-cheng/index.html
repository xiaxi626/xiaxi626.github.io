<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="https://xiaxi626.github.io/favicon.ico" type="image/x-icon" />
<meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
<meta name="apple-mobile-web-app-capable"content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style"content="black"/>
<meta name="format-detection"content="telephone=no"/>
<meta name="renderer"content="webkit">
<meta name="description"content="温故而知新">
<meta charset="UTF-8">
<title>GPG入门教程 | 飞爱碧玉的个人博客</title>

<link href="https://xiaxi626.github.io/styles/main.css" type="text/css" rel="stylesheet" /><link href="https://at.alicdn.com/t/font_1621793_zatzzgvf30g.css" type="text/css" rel="stylesheet" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css"><script async src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.min.js"></script><script src="https://xiaxi626.github.io/media/js/magnify.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
<script type="text/javascript">function btn_toggle(){document.getElementById("hn").classList.contains("no-js")?document.getElementById("hn").classList.remove("no-js"):document.getElementById("hn").classList.add("no-js")}</script>


<script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>


<!-- DEMO CSS -->
<style type="text/css">
	.github-badge {
    display: inline-block;
    border-radius: 4px;
    text-shadow: none;
    font-size: 12px;
    color: #fff;
    line-height: 1.25;
    margin-bottom: 5px
}

.github-badge a {
    color: #fff
}

.github-badge .badge-subject {
    display: inline-block;
    background-color: #555;
    padding: 4px 4px 4px 6px;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px
}

.github-badge .badge-value {
    display: inline-block;
    padding: 4px 6px 4px 4px;
    border-top-right-radius: 4px;
    border-bottom-right-radius: 4px
}

.github-badge .bg-blue {
    background-color: #007ec6 !important
}

.github-badge .bg-green {
    background-color: #97ca00 !important
}

#footer span {
    font-size: .9em
}
</style>

<link rel="canonical" href="https://xiaxi626.github.io/post/gpg-ru-men-jiao-cheng/" />
</head>
<body>
<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >本页面需要浏览器支持（启用）JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://xiaxi626.github.io"><img alt="logo" style="display:inline-block;" src="https://xiaxi626.github.io/images/avatar.png"/></a><h1 title="飞爱碧玉的个人博客" class="weaklink"><a  href="/">飞爱碧玉的个人博客</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >首页</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >归档</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >标签</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >关于</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/friends" class="selected active current nav__item" >友情链接</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索..."></form></div><div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >首页</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >归档</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >标签</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >关于</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/friends" class="selected active current nav__item" >友情链接</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form" data-update="1695908135496" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="搜索..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>


<div class="main"><div class="main-inner"><div class="content">
<article class="post">
<h2 class="post_title sm_margin"><a>GPG入门教程</a></h2>
<script>function lan(){if(document.getElementById("lan").innerText=="繁"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="简"}else{if(document.getElementById("lan").innerText=="簡"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="繁"}}};</script>
<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px"> 2023-08-24</span><i class="iconfont icon-browse"></i><span style="margin-right:15px"> <span id="busuanzi_value_page_pv"></span> Views</span><i class="iconfont icon-category"></i><span class="weaklink" style="margin-right:15px">	<a href="https://xiaxi626.github.io/tag/JcIpV52xSP/" class="tag">Technology</a></span><i class="iconfont icon-caret-down"></i><span style="margin-right:15px">5018字</span><i class="iconfont icon-naozhong"></i><span style="margin-right:15px">21 min read</span><a id="lan" href="javascript:void(0);"onclick="lan();"title="调整简繁体" style="margin-right:15px;">繁</a>
</section>

<div style="display:flex">
<div class="md_block" id="md_block">

<div class="round-shape-one"></div>

<h2 id="前言">前言</h2>
<p>Github设置有一项叫“SSH 与 GPG 公钥”，平常我们看一些教程只需要使用SSH 公钥，好像用不到GPG 公钥，直到我看到这篇有趣的帖子——<a href="https://spencerwoo.com/blog/wait-this-is-not-my-commit">👨‍💻 震惊！竟然有人在 GitHub 上冒充我的身份！</a></p>
<blockquote>
<p>Git 的 commit 是可以任意修改的，你可以将某个坏 commit 嫁祸给别人，甚至将某个坏仓库的 commit 批量嫁祸给毫不知情的人。<br>
使用一个只有我们自己手中拥有的 GPG 私钥对我们的 commit 进行签名，可以让 GitHub 确认我们本次 commit 是真实且是本人操作的。这样，别有用心的他人就无法以我们的身份创建「被签名」的 commit。在 GitHub 上使用的 GPG 密钥和我们的 SSH 密钥并不一样，后者 SSH key 唯一存在的原因是为了向 GitHub 证明身份，用于向我们拥有权限的仓库中进行 commit，而前者 GPG key 则是为了「证明我拥有本次 commit 的著作权」，也只有用 GPG 私钥签名的 commit 在 GitHub 上才会显示如下图的 Verified 绿色钦定小标标。</p>
</blockquote>
<p>今天我们就来了解一下GPG是什么，以及怎么用。</p>
<h2 id="什么是gpg">什么是GPG</h2>
<p>1991年，菲利普·齐墨尔曼(Philip R. Zimmermann)发明了PGP加密算法，第一个版本的 PGP 程式与其中使用的加密算法 BassOmatic 都是由齐默尔曼发展出来。但 PGP 是商业软件，不能自由使用。所以，自由软件基金会决定开发一款自由软件以替代 PGP。这就是GPG的由来。</p>
<h3 id="pgp-与-gpg-的关系">PGP 与 GPG 的关系</h3>
<p><strong>PGP</strong></p>
<ul>
<li>Pretty Good Privacy，是一个被设计用来加密信息，保护隐私的软件。</li>
<li>OpenPGP 是与最初 PGP 工具兼容的 IETF 标准</li>
<li>现在提到“PGP”， 基本上是说 OpenPGP 标准。</li>
</ul>
<p><strong>GPG</strong></p>
<ul>
<li>即GnuPG。</li>
<li>GnuPG （“Gnu Privacy Guard”）是实现了 OpenPGP 标准的自由软件。</li>
<li>GnuPG 的命令行工具称为 “gpg”</li>
</ul>
<h3 id="gpg-key-使用场景">GPG KEY 使用场景</h3>
<ul>
<li>使用 GPG 密钥来签名你的 git commits</li>
<li>使用公钥验证第三方软件的签名</li>
<li>使用 gpg 公钥来加密你的邮件</li>
<li>使用公钥认证来实现授权登陆 (Public Key Authentication)</li>
</ul>
<h2 id="linux下使用gpg签名加密">Linux下使用GPG签名/加密</h2>
<h3 id="安装-gpg">安装 GPG</h3>
<p>Linux下GPG有两种安装方式。可以下载源码，自己编译安装。</p>
<pre><code class="language-bash">./configure
make
make install
</code></pre>
<p>也可以安装编译好的二进制包</p>
<pre><code class="language-bash"># Debian / Ubuntu 环境
sudo apt-get install gnupg

# Fedora 环境
yum install gnupg

# Arch 环境
sudo pacman -S gnupg
</code></pre>
<p>完成后键入以下命令</p>
<pre><code class="language-bash">gpg --help
</code></pre>
<p>如果屏幕显示GPG的帮助，就表示安装成功。</p>
<h3 id="生成密钥">生成密钥</h3>
<pre><code class="language-bash">gpg –-gen-key
</code></pre>
<p>回车以后会跳出</p>
<pre><code class="language-bash">gpg (GnuPG) 2.2.41-unknown; Copyright (C) 2022 g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

gpg: directory '/c/Users/Administrator/.gnupg' created
gpg: keybox '/c/Users/Administrator/.gnupg/pubring.kbx' created
Note: Use &quot;gpg --full-generate-key&quot; for a full featured key generation dialog.

GnuPG needs to construct a user ID to identify your key.

Real name:

</code></pre>
<p>使用“gpg --full-generate-key”生成GPG密钥，有详细的配置参数。</p>
<pre><code class="language-bash">gpg (GnuPG) 2.2.41-unknown; Copyright (C) 2022 g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
  (14) Existing key from card
Your selection?

</code></pre>
<p>默认选择第一个选项，表示加密和签名都使用RSA算法。<br>
然后，系统就会问你密钥的长度。</p>
<pre><code class="language-bash">RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (3072)

</code></pre>
<p>接着，设定密钥的有效期。</p>
<pre><code class="language-bash">Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0)

</code></pre>
<p>个人使用建议选择第一个选项，即永不过期，回车即可。接下来，系统让你确认。</p>
<pre><code class="language-bash">Key does not expire at all
Is this correct? (y/N)

</code></pre>
<p>输入y，系统要求提供个人信息。</p>
<pre><code class="language-bash">GnuPG needs to construct a user ID to identify your key.

Real name:
Email address:
Comment:

</code></pre>
<p>&quot;Comment&quot;这一栏可以空着。<br>
然后你的用户ID就生成了。</p>
<pre><code class="language-bash">You selected this USER-ID:
    &quot;xiaxi626 &lt;aijiang1220966821@hotmail.com&gt;&quot;

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit?

</code></pre>
<p>系统会让你最后确认一次。<br>
输入O表示&quot;确定&quot;。<br>
接着，系统会让你设定一个私钥的密码。</p>
<pre><code class="language-bash">您需要一个密码来保护您的私钥：
</code></pre>
<p>二次输入确认密码后，系统就开始生成密钥了。</p>
<pre><code class="language-bash">We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
</code></pre>
<p>几分钟以后，系统提示密钥已经生成了。</p>
<pre><code class="language-bash">gpg: /c/Users/Administrator/.gnupg/trustdb.gpg: trustdb created
gpg: directory '/c/Users/Administrator/.gnupg/openpgp-revocs.d' created
gpg: revocation certificate stored as '/c/Users/Administrator/.gnupg/openpgp-revocs.d/2DF491A4DB677422C13A5398102ED6A053101F78.rev'
public and secret key created and signed.
</code></pre>
<p>请注意上面的字符串&quot;2DF491A4DB677422C13A5398102ED6A053101F78&quot;，这是&quot;用户ID&quot;的Hash字符串，可以用来替代&quot;用户ID&quot;。<br>
这时，最好再生成一张&quot;撤销证书&quot;，以备以后密钥作废时，可以请求外部的公钥服务器撤销你的公钥。</p>
<pre><code class="language-bash">gpg --gen-revoke [用户ID]
</code></pre>
<p>上面的&quot;用户ID&quot;部分，可以填入你的邮件地址或者Hash字符串（以下同）。<br>
系统提示。</p>
<pre><code class="language-bash">Create a revocation certificate for this key? (y/N)
</code></pre>
<h3 id="密钥管理">密钥管理</h3>
<h4 id="查看公钥">查看公钥</h4>
<p>list-keys参数列出系统中已有的密钥。</p>
<pre><code class="language-bash">gpg --list-key
</code></pre>
<p>网上教程的显示结果：</p>
<pre><code class="language-bash">　　/home/ruanyf/.gnupg/pubring.gpg
　　-------------------------------
　　pub 4096R/EDDD6D76 2013-07-11
　　uid Ruan YiFeng &lt;yifeng.ruan@gmail.com&gt;
　　sub 4096R/3FA69BE4 2013-07-11
</code></pre>
<p>第一行显示公钥文件名（pubring.gpg），第二行显示公钥特征（4096位，Hash字符串和生成时间），第三行显示&quot;用户ID&quot;，第四行显示私钥特征。<br>
本机输入<code>gpg --list-key</code> 显示：</p>
<pre><code class="language-bash">gpg: checking the trustdb
gpg: marginals needed: 3  completes needed: 1  trust model: pgp
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
/c/Users/Administrator/.gnupg/pubring.kbx
-----------------------------------------
pub   rsa3072 2023-08-25 [SC]
      2DF491A4DB677422C13A5398102ED6A053101F78
uid           [ultimate] xiaxi626 &lt;aijiang1220966821@hotmail.com&gt;
sub   rsa3072 2023-08-25 [E]

</code></pre>
<p><code>pubring.kbx</code>是密钥块资源。<br>
如果你要从密钥列表中删除某个密钥，可以使用delete-key参数。</p>
<pre><code class="language-bash">gpg --delete-key [用户ID]
</code></pre>
<p>删除公钥前会提示</p>
<pre><code class="language-bash">gpg: there is a secret key for public key &quot;[公钥]&quot;!
gpg: use option &quot;--delete-secret-keys&quot; to delete it first.

</code></pre>
<h4 id="查看私钥">查看私钥</h4>
<p>list-secret-keys参数列出系统中已有的私钥。</p>
<pre><code class="language-bash">gpg --list-secret-keys
</code></pre>
<p>显示结果如下：</p>
<pre><code class="language-bash">/c/Users/Administrator/.gnupg/pubring.kbx
-----------------------------------------
sec#  rsa3072 2023-08-25 [SC]
      2DF491A4DB677422C13A5398102ED6A053101F78
uid           [ultimate] xiaxi626 &lt;aijiang1220966821@hotmail.com&gt;
ssb   rsa3072 2023-08-25 [E]

</code></pre>
<h4 id="输出密钥">输出密钥</h4>
<p>公钥文件（.gnupg/pubring.gpg）以二进制形式储存，armor参数可以将其转换为ASCII码显示。</p>
<pre><code class="language-bash">gpg --armor --output public-key.txt --export [用户ID]

or

gpg -a --export [用户ID] &gt; public-key.asc
</code></pre>
<p>&quot;用户ID&quot;指定哪个用户的公钥，output参数指定输出文件名（public-key.txt）。</p>
<p>类似地，export-secret-keys参数可以转换私钥。</p>
<pre><code class="language-bash">gpg --armor --output private-key.txt --export-secret-keys

or

gpg -a --export-secret-keys [用户ID] &gt; private-key.asc
</code></pre>
<h4 id="上传公钥">上传公钥</h4>
<p>公钥服务器是网络上专门储存用户公钥的服务器。send-keys参数可以将公钥上传到服务器。</p>
<pre><code class="language-bash">gpg --send-keys [用户ID] --keyserver hkp://subkeys.pgp.net
</code></pre>
<p>使用上面的命令，你的公钥就被传到了服务器subkeys.pgp.net，然后通过交换机制，所有的公钥服务器最终都会包含你的公钥。<br>
由于公钥服务器没有检查机制，任何人都可以用你的名义上传公钥，所以没有办法保证服务器上的公钥的可靠性。通常，你可以在网站上公布一个公钥指纹，让其他人核对下载到的公钥是否为真。fingerprint参数生成公钥指纹。</p>
<pre><code class="language-bash">gpg --fingerprint [用户ID]
</code></pre>
<h4 id="输入密钥">输入密钥</h4>
<p>除了生成自己的密钥，还需要将他人的公钥或者你的其他密钥输入系统。这时可以使用import参数。</p>
<pre><code class="language-bash">gpg --import [密钥文件]
</code></pre>
<p>为了获得他人的公钥，可以让对方直接发给你，或者到公钥服务器上寻找。</p>
<pre><code class="language-bash">gpg --keyserver hkp://subkeys.pgp.net --search-keys [用户ID]
</code></pre>
<p>正如前面提到的，我们无法保证服务器上的公钥是否可靠，下载后还需要用其他机制验证．</p>
<h3 id="加密和解密">加密和解密</h3>
<h4 id="加密">加密</h4>
<p>假定有一个文本文件demo.txt，怎样对它加密呢？<br>
encrypt参数用于加密。</p>
<pre><code class="language-bash">gpg --recipient [用户ID] --output demo.en.txt --encrypt demo.txt
</code></pre>
<p>recipient参数指定接收者的公钥，output参数指定加密后的文件名，encrypt参数指定源文件。运行上面的命令后，demo.en.txt就是已加密的文件，可以把它发给对方。</p>
<pre><code class="language-bash">gpg -ea -r [用户ID] filename
</code></pre>
<p>即会生成filename.asc的加密文件。</p>
<h4 id="解密">解密</h4>
<p>对方收到加密文件以后，就用自己的私钥解密。</p>
<pre><code class="language-bash">gpg --decrypt demo.en.txt --output demo.de.txt
</code></pre>
<p>decrypt参数指定需要解密的文件，output参数指定解密后生成的文件。运行上面的命令，demo.de.txt就是解密后的文件。</p>
<p>GPG允许省略decrypt参数。</p>
<pre><code class="language-bash">gpg demo.en.txt
</code></pre>
<p>运行上面的命令以后，解密后的文件内容直接显示在标准输出。</p>
<pre><code class="language-bash">gpg -o filename -d filename.asc
</code></pre>
<p>运行上面的命令以后，输入私钥密码。<br>
即可把filename.asc的加密文件解密成filename文件。</p>
<h3 id="签名">签名</h3>
<h4 id="对文件签名">对文件签名</h4>
<p>有时，我们不需要加密文件，只需要对文件签名，表示这个文件确实是我本人发出的。sign参数用来签名。</p>
<pre><code class="language-bash">gpg --sign demo.txt
</code></pre>
<p>运行上面的命令后，当前目录下生成demo.txt.gpg文件，这就是签名后的文件。这个文件默认采用二进制储存，如果想生成ASCII码的签名文件，可以使用clearsign参数。</p>
<pre><code class="language-bash">gpg --clearsign demo.txt
</code></pre>
<p>运行上面的命令后 ，当前目录下生成demo.txt.asc文件，后缀名asc表示该文件是ASCII码形式的。</p>
<p>如果想生成单独的签名文件，与文件内容分开存放，可以使用detach-sign参数。</p>
<pre><code class="language-bash">gpg --detach-sign demo.txt
</code></pre>
<p>运行上面的命令后，当前目录下生成一个单独的签名文件demo.txt.sig。该文件是二进制形式的，如果想采用ASCII码形式，要加上armor参数。</p>
<pre><code class="language-bash">gpg --armor --detach-sign demo.txt
</code></pre>
<h4 id="签名加密">签名+加密</h4>
<p>上一节的参数，都是只签名不加密。如果想同时签名和加密，可以使用下面的命令。</p>
<pre><code class="language-bash">gpg --local-user [发信者ID] --recipient [接收者ID] --armor --sign --encrypt demo.txt
</code></pre>
<p>local-user参数指定用发信者的私钥签名，recipient参数指定用接收者的公钥加密，armor参数表示采用ASCII码形式显示，sign参数表示需要签名，encrypt参数表示指定源文件。</p>
<h4 id="验证签名">验证签名</h4>
<p>我们收到别人签名后的文件，需要用对方的公钥验证签名是否为真。verify参数用来验证。</p>
<pre><code class="language-bash">gpg --verify demo.txt.asc demo.txt
</code></pre>
<p>举例来说，openvpn网站就提供每一个下载包的gpg签名文件。你可以根据它的说明，验证这些下载包是否为真。</p>
<h2 id="在-gitee-上使用-gpg-key-来签名-commit">在 Gitee 上使用 GPG key 来签名 commit</h2>
<ol>
<li>Kleopatra创建OpenPGP密钥对，输入用户名和邮箱，注意邮箱必须与 Gitee 提交邮箱一致；</li>
<li>导出公钥和私钥文件；</li>
<li>打开公钥文件，复制内容到<a href="https://gitee.com/profile/gpg_keys">Gitee gpg_keys</a>，复制页面GPG密钥的指纹字符串；</li>
<li>输入【查看公钥、私钥命令 | 输入密钥命令】，输入密钥到.gnupg文件夹；</li>
<li>输入查看公钥或查看私钥命令，得到&quot;用户ID&quot;的Hash字符串，和<a href="https://gitee.com/profile/gpg_keys">Gitee gpg_keys</a>页面GPG公钥指纹字符串是一样的；</li>
<li>配置 Git</li>
</ol>
<pre><code class="language-bash">git config --global user.signingkey [Gitee网页GPG公钥指纹/本地&quot;用户ID&quot;的Hash字符串]
</code></pre>
<ol start="7">
<li>
<p>输入<code>git config --global --list</code>检查git config是否配置成功，输入<code>git config --global --edit</code>可修改配置；</p>
</li>
<li>
<p>添加到 Gitee 账户,查看<a href="https://gitee.com/profile/gpg_keys">GPG 公钥验证状态</a>，GPG 邮箱为当前用户已激活邮箱验证才能通过;</p>
<ul>
<li>删除 仅移除 GPG 公钥，验证通过的 Commit 签名状态保持不变</li>
<li>注销 移除 GPG 公钥并且将已验证的 Commit 签名状态修改为未验证</li>
</ul>
</li>
<li>
<p>使用 GPG 签名进行提交</p>
</li>
</ol>
<pre><code class="language-bash">git commit -S -m &quot;YOUR COMMIT MESSAGE&quot;
git log --show-signature # 查看签名状态
</code></pre>
<ol start="10">
<li>提交的显示结果</li>
</ol>
<pre><code class="language-bash">git push origin master
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 564 bytes | 564.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Powered by GITEE.COM [GNK-6.4]
To gitee.com:xiaxi626/gpg-test.git
   8013057..53ca0f6  master -&gt; master

</code></pre>
<ol start="11">
<li>
<p>签名状态，Commit出现<code>Verified</code> | <code>This commit was signed with the committer's verified signature</code>，成功。</p>
<ul>
<li>Commit 验证通过的条件为：commit 提交邮箱与 commit GPG 签名所使用的公钥邮箱一致且 GPG 公钥验证通过。</li>
</ul>
</li>
<li>
<p>查看 GPG 公钥</p>
<ul>
<li>输入 <code>https://gitee.com/\&lt;username&gt;.gpg</code></li>
<li>选择用户个人资料右上角的设置页面进入安全设置 - GPG 公钥</li>
<li>Gitee 平台 GPG 公钥：https://gitee.com/gitee.gpg</li>
</ul>
</li>
</ol>
<h2 id="在-github-上使用-gpg-key-来签名-commit">在 Github 上使用 GPG key 来签名 commit</h2>
<h3 id="github-配置-gpg">Github 配置 GPG</h3>
<h4 id="配置-gpg-公钥到仓库">配置 GPG 公钥到仓库</h4>
<p>Github <code>Setting</code> -&gt; <code>SSH and GPG keys</code> -&gt; <code>New GPG Key</code> 导入即可</p>
<h4 id="本地代码仓库启用gpg-sign">本地代码仓库启用GPG Sign</h4>
<p>通过<code>gpg --list-keys</code>查看<code>pub GPG key ID</code>，后设置<code>git</code>签名时用的<code>key</code></p>
<h4 id="全局设置">全局设置</h4>
<pre><code class="language-bash"># 配置已经生成的GPG Key ID
git config --global user.signingkey &lt;pub GPG key ID&gt;
# 配置启用GPG签名
git config --global commit.gpgsign true
</code></pre>
<p>指定仓库设置，需要进入代码目录：</p>
<pre><code class="language-bash"># 配置已经生成的GPG Key ID
git config --local user.signingkey &lt;pub GPG key ID&gt;
# 配置启用GPG签名
git config --local commit.gpgsign true
</code></pre>
<h4 id="重启-gpg-agent">重启 gpg-agent</h4>
<p>第一次配置，必须重启，否则签名会失败，命令如下：</p>
<pre><code class="language-bash">gpgconf –kill gpg-agent
</code></pre>
<h4 id="上述步骤示例">上述步骤示例</h4>
<pre><code class="language-bash">Administrator@AUTOBVT-Q90417J MINGW64 ~/Desktop
$ git config --global user.signingkey 69A20512441F53BA4F13F93F74EA6A7E693AEF20

Administrator@AUTOBVT-Q90417J MINGW64 ~/Desktop
$ git config --global commit.gpgsign true

Administrator@AUTOBVT-Q90417J MINGW64 ~/Desktop
$ gpgconf –kill gpg-agent
gpg:OpenPGP:/usr/bin/gpg
gpgsm:S/MIME:/usr/bin/gpgsm
gpg-agent:Private Keys:/usr/bin/gpg-agent
scdaemon:Smartcards:/usr/lib/gnupg/scdaemon
dirmngr:Network:/usr/bin/dirmngr
pinentry:Passphrase Entry:/usr/bin/pinentry
</code></pre>
<p>Windows 上的 git-bash 上默认的 /usr/bin 目录在：C:\Program Files\Git\usr\bin\。</p>
<h3 id="关闭gpg签名">关闭GPG签名</h3>
<p>所有仓库：</p>
<pre><code class="language-bash">git config --global commit.gpgsign false
git config --global --unset commit.gpgsign
</code></pre>
<p>本地仓库：</p>
<pre><code class="language-bash">git config --local commit.gpgsign false
git config --local --unset commit.gpgsign
</code></pre>
<h3 id="git-使用">git 使用</h3>
<h4 id="提交">提交</h4>
<pre><code class="language-bash">git commit -am &quot;feature: something&quot;
git push origin develop
</code></pre>
<p>然后我们可以在 git 中看到 <code>Verified</code> 的标识。</p>
<p>如果不设置<code>git config --global commit.gpgsign true</code>，提交的时候加上一个 <code>-S</code> 参数就可以为提交签名：</p>
<pre><code class="language-bash">git commit -S -m `your commit message`
</code></pre>
<h4 id="提交tag时签名">提交tag时签名</h4>
<pre><code class="language-bash">git tag -s ...
</code></pre>
<h4 id="查看日志">查看日志</h4>
<pre><code class="language-bash">git log --show-signature -1
</code></pre>
<h2 id="使用-kleopatra-来签名加密文件">使用 Kleopatra 来签名/加密文件</h2>
<p>Gpg4win（GNU Privacy Guard for Windows）是一个<strong>加密</strong>软件，用于对文件和电子邮件进行签名和加密。</p>
<p>它能够生成OpenPGP密钥对、签名／验证、加密／解密，还可以建立S/MIME认证请求。</p>
<p><strong>OpenPGP 证书高级设置</strong></p>
<p>1、密钥类型</p>
<ul>
<li>RSA</li>
<li>DSA</li>
<li>ECDSA/EdDSA（默认）</li>
</ul>
<p>2、证书用途</p>
<ul>
<li>签名</li>
<li>证书 仅加密（默认）</li>
<li>验证</li>
<li>有效期结束于</li>
</ul>
<p>新建密钥对后，界面会显示一条证书信息，包含名称、电子邮件、用户编号（认证的/已吊销）、有效期、密钥ID。<br>
你可以双击证书来添加用户ID、认证用户IDs、吊销证书、吊销用户ID等。</p>
<h3 id="签名加密文件">签名/加密文件</h3>
<ol>
<li>新建OpenPGP秘钥对</li>
<li>输入名称和电子邮件</li>
<li>需要进行高级设置可以点击高级设置进行设置，默认密钥类型为ECDSA，可以根据需要设置过期时间</li>
<li>勾选“需要密码句保护生成的密钥”，输入密码句</li>
<li>密码复杂度低时会提示你重新输入密码，如果密码要求不是太高，直接点击Take this one anyway，如果需要返回重新设置，点击Enter new passphrase</li>
<li>秘钥对创建成功，右键“备份私钥”，生成密钥对的副本，输入密码，导出成功</li>
<li>导出公钥，右键该加密证书，导出公钥，选择公钥的导出目录，导出</li>
<li>将需要的加密的文件拖入到kleopatra中，点击签名/加密</li>
<li>选择加密证书以及加密文件存储位置，输入密码，加密完成</li>
</ol>
<h3 id="解密验证文件">解密/验证文件</h3>
<ol>
<li>首先需要得到对方的加密公钥和私钥文件</li>
<li>先导入公钥文件（.asc），为本地创建一个证书</li>
<li>创建完成后，认证证书公钥，只认证自己，输入刚刚创建的本地证书密码</li>
<li>继续导入，选择私钥文件（.gpg）导入,查看证书详情，证书颜色已经变深，可以进行解密操作了</li>
<li>将对方发送的加密文件（.gpg）拖入到kleopatra中进行解密，点击 Save All 保存，得到解密后的文件</li>
</ol>
<p>想要对方加密文件给你，你需要提供公钥给对方，对方用你的公钥进行加密，发送给你加密文件后，你需用你的私钥进行解密。</p>
<p>可以进行解密操作后，双击<strong>签名/加密</strong>输出的文件和点击<strong>解密/校验</strong>效果是一样的。</p>
<h2 id="关于提交签名验证">关于提交签名验证</h2>
<p>使用 GPG、SSH、 或 S/MIME，可以在本地对标记和提交进行签名。 这些标记或提交在 GitHub 上标示为已验证，便于其他人信任更改来自可信的来源。</p>
<p>您可以在本地签署提交和标签，让其他人对您所做更改的源充满信心。 如果提交或标记具有可加密验证的 GPG、SSH、 或 S/MIME 签名，GitHub 会将提交或标记标示为“已验证”或“部分验证”。</p>
<p>存储库提交列表中提交的屏幕截图。 “已验证”以橙色轮廓突出显示。</p>
<p>对于大多数个人用户，GPG 或 SSH 会是对提交进行签名的最佳选择。 在较大型组织的环境中通常需要 S/MIME 签名。 SSH 签名是最容易生成的。 甚至可以将现有身份验证密钥上传到 GitHub 以用作签名密钥。 生成 GPG 签名密钥比生成 SSH 密钥更复杂，但 GPG 具有 SSH 所没有的功能。 GPG 密钥可以在不再使用时过期或撤销。 GitHub 将已使用此类密钥进行签名的提交显示为“已验证”，除非密钥标记为已泄露。 SSH 密钥没有此功能。</p>
<h3 id="gpg-提交签名验证">GPG 提交签名验证</h3>
<p>GitHub 使用 OpenPGP 库来确认本地签名的提交和标记，是否根据你在 GitHub.com 上添加到帐户的公钥进行加密验证。</p>
<h3 id="ssh-提交签名验证">SSH 提交签名验证</h3>
<p>可以使用 SSH 通过自己生成的 SSH 密钥对提交进行签名。 有关详细信息，请查看 <code>user.Signingkey</code> 的 <a href="https://git-scm.com/docs/git-config#Documentation/git-config.txt-usersigningKey">Git 参考文档</a>。 如果已使用 SSH 密钥向 GitHub 进行了身份验证，还可以再次上传该相同密钥以用作签名密钥。 可以添加到帐户的签名密钥数没有限制。</p>
<p>GitHub 使用 ssh_data（一种开放源代码 Ruby 库）来确认本地签名的提交和标记是否根据在 GitHub.com 上添加到帐户的公钥进行加密验证。</p>
<h2 id="参考">参考</h2>
<p><a href="https://spencerwoo.com/blog/wait-this-is-not-my-commit">👨‍💻 震惊！竟然有人在 GitHub 上冒充我的身份！</a><br>
<a href="https://docs.github.com/zh/authentication/managing-commit-signature-verification/about-commit-signature-verification">关于提交签名验证 - GitHub 文档</a><br>
<a href="http://ruanyifeng.com/blog/2013/07/gpg.html">GPG入门教程 - 阮一峰的网络日志</a><br>
<a href="https://pythonjishu.com/bbddvfjaylxx/">Linux下GPG的使用</a><br>
<a href="https://wobushixiaohai.blog.csdn.net/article/details/122238040">推荐一款好用的文件加密传输软件——Kleopatra（含详细使用文档）</a><br>
<a href="https://blog.csdn.net/qq_44686646/article/details/115305433">Kleopatra文件的加密解密遇到部分问题_kleopatra解密_少猿的博客</a><br>
<a href="https://zhuanlan.zhihu.com/p/481900853">使用 GPG Key 来构建签名、加密及认证体系 - 知乎</a><br>
<a href="https://zhuanlan.zhihu.com/p/137801979">简明 GPG 概念 - 知乎</a><br>
<a href="https://zhuanlan.zhihu.com/p/344198727">2021年，用更现代的方法使用PGP（上） - 知乎</a><br>
<a href="https://www.jianshu.com/p/91c98a27fd16">PGP——密码技术的完美组合 - 简书</a><br>
<a href="https://help.gitee.com/repository/ssh-key/how-to-use-gpg-with-gitee">如何在 Gitee 上使用 GPG | Gitee 产品文档</a><br>
<a href="https://www.xiexianbin.cn/git/command/git-gpg/index.html">使用 GPG 签名 Git Commit-谢先斌的博客</a><br>
<a href="https://blog.kelu.org/tech/2022/03/15/git-global-config-reset.html">修改/重置 git 的全局配置 | 血衫非弧の一存</a></p>

<span id="footnote"></span>
<div id = "warn"></div>
</div>
<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%89%8D%E8%A8%80">前言</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFgpg">什么是GPG</a>
<ul>
<li><a href="#pgp-%E4%B8%8E-gpg-%E7%9A%84%E5%85%B3%E7%B3%BB">PGP 与 GPG 的关系</a></li>
<li><a href="#gpg-key-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">GPG KEY 使用场景</a></li>
</ul>
</li>
<li><a href="#linux%E4%B8%8B%E4%BD%BF%E7%94%A8gpg%E7%AD%BE%E5%90%8D%E5%8A%A0%E5%AF%86">Linux下使用GPG签名/加密</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85-gpg">安装 GPG</a></li>
<li><a href="#%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5">生成密钥</a></li>
<li><a href="#%E5%AF%86%E9%92%A5%E7%AE%A1%E7%90%86">密钥管理</a>
<ul>
<li><a href="#%E6%9F%A5%E7%9C%8B%E5%85%AC%E9%92%A5">查看公钥</a></li>
<li><a href="#%E6%9F%A5%E7%9C%8B%E7%A7%81%E9%92%A5">查看私钥</a></li>
<li><a href="#%E8%BE%93%E5%87%BA%E5%AF%86%E9%92%A5">输出密钥</a></li>
<li><a href="#%E4%B8%8A%E4%BC%A0%E5%85%AC%E9%92%A5">上传公钥</a></li>
<li><a href="#%E8%BE%93%E5%85%A5%E5%AF%86%E9%92%A5">输入密钥</a></li>
</ul>
</li>
<li><a href="#%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86">加密和解密</a>
<ul>
<li><a href="#%E5%8A%A0%E5%AF%86">加密</a></li>
<li><a href="#%E8%A7%A3%E5%AF%86">解密</a></li>
</ul>
</li>
<li><a href="#%E7%AD%BE%E5%90%8D">签名</a>
<ul>
<li><a href="#%E5%AF%B9%E6%96%87%E4%BB%B6%E7%AD%BE%E5%90%8D">对文件签名</a></li>
<li><a href="#%E7%AD%BE%E5%90%8D%E5%8A%A0%E5%AF%86">签名+加密</a></li>
<li><a href="#%E9%AA%8C%E8%AF%81%E7%AD%BE%E5%90%8D">验证签名</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%9C%A8-gitee-%E4%B8%8A%E4%BD%BF%E7%94%A8-gpg-key-%E6%9D%A5%E7%AD%BE%E5%90%8D-commit">在 Gitee 上使用 GPG key 来签名 commit</a></li>
<li><a href="#%E5%9C%A8-github-%E4%B8%8A%E4%BD%BF%E7%94%A8-gpg-key-%E6%9D%A5%E7%AD%BE%E5%90%8D-commit">在 Github 上使用 GPG key 来签名 commit</a>
<ul>
<li><a href="#github-%E9%85%8D%E7%BD%AE-gpg">Github 配置 GPG</a>
<ul>
<li><a href="#%E9%85%8D%E7%BD%AE-gpg-%E5%85%AC%E9%92%A5%E5%88%B0%E4%BB%93%E5%BA%93">配置 GPG 公钥到仓库</a></li>
<li><a href="#%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93%E5%90%AF%E7%94%A8gpg-sign">本地代码仓库启用GPG Sign</a></li>
<li><a href="#%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE">全局设置</a></li>
<li><a href="#%E9%87%8D%E5%90%AF-gpg-agent">重启 gpg-agent</a></li>
<li><a href="#%E4%B8%8A%E8%BF%B0%E6%AD%A5%E9%AA%A4%E7%A4%BA%E4%BE%8B">上述步骤示例</a></li>
</ul>
</li>
<li><a href="#%E5%85%B3%E9%97%ADgpg%E7%AD%BE%E5%90%8D">关闭GPG签名</a></li>
<li><a href="#git-%E4%BD%BF%E7%94%A8">git 使用</a>
<ul>
<li><a href="#%E6%8F%90%E4%BA%A4">提交</a></li>
<li><a href="#%E6%8F%90%E4%BA%A4tag%E6%97%B6%E7%AD%BE%E5%90%8D">提交tag时签名</a></li>
<li><a href="#%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97">查看日志</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8-kleopatra-%E6%9D%A5%E7%AD%BE%E5%90%8D%E5%8A%A0%E5%AF%86%E6%96%87%E4%BB%B6">使用 Kleopatra 来签名/加密文件</a>
<ul>
<li><a href="#%E7%AD%BE%E5%90%8D%E5%8A%A0%E5%AF%86%E6%96%87%E4%BB%B6">签名/加密文件</a></li>
<li><a href="#%E8%A7%A3%E5%AF%86%E9%AA%8C%E8%AF%81%E6%96%87%E4%BB%B6">解密/验证文件</a></li>
</ul>
</li>
<li><a href="#%E5%85%B3%E4%BA%8E%E6%8F%90%E4%BA%A4%E7%AD%BE%E5%90%8D%E9%AA%8C%E8%AF%81">关于提交签名验证</a>
<ul>
<li><a href="#gpg-%E6%8F%90%E4%BA%A4%E7%AD%BE%E5%90%8D%E9%AA%8C%E8%AF%81">GPG 提交签名验证</a></li>
<li><a href="#ssh-%E6%8F%90%E4%BA%A4%E7%AD%BE%E5%90%8D%E9%AA%8C%E8%AF%81">SSH 提交签名验证</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83">参考</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="fullPage"><canvas id="canvas"></canvas></div>
</article>
<div id="eof"><span>EOF</span></div>

<div class="round-shape-one"></div>

<section>
<div class="doc_comments">

            
                <!--评论显示区，请插入合适的位置-->
<div id="comment"></div>
<!--Leancloud 操作库:-->
<script src="//cdn.jsdelivr.net/npm/leancloud-storage@4.13.2/dist/av-min.js"></script>
<!--<script src="//cdn1.lncld.net/static/js/3.6.1/av-min.js"></script>-->
<!--Valine 的核心代码库-->
<script src="//cdnjs.cloudflare.com/ajax/libs/valine/1.5.1/Valine.min.js"></script>
<!--<script src="//cdn.jsdelivr.net/npm/valine@1.4.4/dist/Valine.min.js"></script>-->
<script>
    new Valine({
        el:'#comment',
        appId: '2EhI3kZCg0PpwHaW4CRpwsYu-gzGzoHsz',
        appKey: 'XEh9nruDRqlHqqfaFkHmeyKq',
        placeholder: '',
        avatar:'',
        pageSize: '10',
        recordIP: 'true',
        requiredFields: ['nick','mail'],
        enableQQ: 'true',
        emojiCDN: '//i0.hdslb.com/bfs/',
        emojiMaps: {
        "tv-doge": "emote/6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
        "tv-坏笑": "emote/1f0b87f731a671079842116e0991c91c2c88645a.png",
        "tv-难过": "emote/87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
        "tv-生气": "emote/26702dcafdab5e8225b43ffd23c94ac1ff932654.png",
        "tv-委屈": "emote/d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
        "tv-斜眼笑": "emote/911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
        "tv-呆": "emote/fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
        "tv-发怒": "emote/34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
        "tv-惊吓": "emote/0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
        "tv-呕吐": "emote/9f996894a39e282ccf5e66856af49483f81870f3.png",
        "tv-思考": "emote/90cf159733e558137ed20aa04d09964436f618a1.png",
        "tv-微笑": "emote/70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
        "tv-疑问": "emote/0793d949b18d7be716078349c202c15ff166f314.png",
        "tv-大哭": "emote/23269aeb35f99daee28dda129676f6e9ea87934f.png",
        "tv-鼓掌": "emote/1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png",
        "tv-抠鼻": "emote/c666f55e88d471e51bbd9fab9bb308110824a6eb.png",
        "tv-亲亲": "emote/a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
        "tv-调皮": "emote/b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png",
        "tv-笑哭": "emote/1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
        "tv-晕": "emote/5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
        "tv-点赞": "emote/f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
        "tv-害羞": "emote/a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
        "tv-睡着": "emote/8b196675b53af58264f383c50ad0945048290b33.png",
        "tv-色": "emote/61822c7e9aae5da76475e7892534545336b23a6f.png",
        "tv-吐血": "emote/09dd16a7aa59b77baa1155d47484409624470c77.png",
        "tv-无奈": "emote/ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
        "tv-再见": "emote/180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
        "tv-流汗": "emote/cead1c351ab8d79e9f369605beb90148db0fbed3.png",
        "tv-偷笑": "emote/bb690d4107620f1c15cff29509db529a73aee261.png",
        "tv-抓狂": "emote/fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
        "tv-黑人问号": "emote/45821a01f51bc867da9edbaa2e070410819a95b2.png",
        "tv-困": "emote/241ee304e44c0af029adceb294399391e4737ef2.png",
        "tv-打脸": "emote/56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
        "tv-闭嘴": "emote/c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
        "tv-鄙视": "emote/6e72339f346a692a495b123174b49e4e8e781303.png",
        "tv-腼腆": "emote/89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
        "tv-馋": "emote/fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
        "tv-可爱": "emote/9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
        "tv-发财": "emote/34db290afd2963723c6eb3c4560667db7253a21a.png",
        "tv-生病": "emote/8b0ec90e6b86771092a498c54f09fc94621c1900.png",
        "tv-流鼻血": "emote/c32d39db2737f89b904ca32700d140a9241b0767.png",
        "tv-尴尬": "emote/7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
        "tv-大佬": "emote/093c1e2c490161aca397afc45573c877cdead616.png",
        "tv-流泪": "emote/7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
        "tv-冷漠": "emote/b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
        "tv-皱眉": "emote/72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
        "tv-鬼脸": "emote/0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
        "tv-调侃": "emote/4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
        "tv-目瞪口呆": "emote/0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
        "珑歌Taki_问号": "garb/15856c32cb30a08f361259a59c71b0edee4427dc.png@65w.webp",
        "珑歌Taki_打Call": "garb/67544581bd5f1390e6d95ac34c47867a9e9ebbbb.png@65w.webp",
        "珑歌Taki_好耶": "garb/0176869034a23b2523b552687ec851f4567bb452.png@65w.webp",
        "珑歌Taki_点赞": "garb/243dcd30319137f2715adbea4a4b106835e5c772.png@65w.webp",
        "珑歌Taki_啊对对": "garb/b2576d904e7fa6cada13a35236611f0128fe7a3a.png@65w.webp",
        "珑歌Taki_达咩": "garb/e39b5d13f7276c08caef3ea7b9585ab94de423da.png@65w.webp",
        "珑歌Taki_辣眼睛": "garb/7db3c777e5f618f4458fd379db9b6cfcc5f96a59.png@65w.webp",
        "珑歌Taki_晚安": "garb/cf46da11526aae66fa9b29532a32f262feaf806b.png@65w.webp",
        "珑歌Taki_羞羞": "garb/05ae694d1ef5335673825357ec3bcaee81ca2fd2.png@65w.webp",
        "珑歌Taki_叉你": "garb/7b6c47c462770fd91ca78982cf43a2025564fead.png@65w.webp",
        "珑歌Taki_给你一拳": "garb/1e46191feebe3412e07919dd33f2daef01884c0d.png@65w.webp",
        "珑歌Taki_委屈": "live/e4ce02a977edbd40a6df488f8ce317f1efb77e01.png@65w.webp",
        "珑歌Taki_呃呃": "live/e5c634f3c00b440af5e0269d6cd23a54dcd78a83.png@65w.webp",
        "珑歌Taki_爱你": "live/27e8e2c6679a2e268a2dc0032adec7e0f68abd89.png@65w.webp",
        "珑歌Taki_惊": "live/30fedf447cef730d5acb87c945bf964d4e43b8be.png@65w.webp",
        "珑歌Taki_干杯": "live/68db36d0645df15f4bb8e678d7d9f3a13840eaec.png@65w.webp",
        "樱吹雪_Yuki_啵啵": "garb/a963d838a5f6197defbb6e0591377d4bfd37707a.png@65w.webp",
        "樱吹雪_Yuki_打call": "garb/18f1f1c34738ebb3e2fc6a99bb2afe24192906ab.png@65w.webp",
        "樱吹雪_Yuki_晚安": "garb/c2651d764536e9de174dfc3ab6c0b74ba38d637e.png@65w.webp",
        "樱吹雪_Yuki_贴贴": "garb/dd5d3510ff3169348cfbd0308432cbf4d86f95da.png@65w.webp",
        "樱吹雪_Yuki_好耶": "garb/8a65b68d1c318f5878f610f0e6be5ab55cfad755.png@65w.webp",
        "樱吹雪_Yuki_嗷呜": "garb/fbb35575d9eeb199895056f6f2e678ea1568034f.png@65w.webp",
        "樱吹雪_Yuki_问号": "garb/31b0cd34cdf7d76c9167c319c4a3aa8c084bfd56.png@65w.webp",
        "樱吹雪_Yuki_哈哈": "garb/b64bccc47c050c201dd1a046c03ebff6bc73f94c.png@65w.webp",
        "樱吹雪_Yuki_妈": "garb/be0e78b625d6b76300b917445c65998c052cb3ce.png@65w.webp",
        "樱吹雪_Yuki_比心": "garb/c6acc382cf720529338d9426e1e7a45bd00ac6db.png@65w.webp",
        "樱吹雪_Yuki_wink": "garb/c2500df5817faf7ca63af1cefe62c2526d7693aa.png@65w.webp",
        "樱吹雪_Yuki_狐狸": "garb/26ae388cad7fb59d8797e7e0d77f198cdab46928.png@65w.webp",
        "花丸晴琉_mua": "emote/25be806bfbbb5300afdbeeb64977c90cd1254bf1.png",
        "花丸晴琉_wink": "emote/343d2d4bbf5919f25e37f971cf114d07232c5e73.png",
        "花丸晴琉_啊咧": "emote/b34c5a1827762b981d689bbc51f134469ef06f23.png",
        "花丸晴琉_大笑": "emote/1e28846f5cbd897dd2653142b8be9db42dfbdcb3.png",
        "花丸晴琉_呆住": "emote/2b31495e0c538e095d44ff1a17834abe317a05d2.png",
        "花丸晴琉_对不起": "emote/02d1e8ddfac938b20956f3d83350f442d398286a.png",
        "花丸晴琉_好耶": "emote/29724d41c08ec63962e0974aa653ea8be0cf3947.png",
        "花丸晴琉_挥手": "emote/2c0753c98d4e098a3c5f27ab658b1046b4032572.png",
        "花丸晴琉_惊慌": "emote/e8307d3bd2ad84434e2f6de1eea727aaa138d987.png",
        "花丸晴琉_泪目": "emote/02a805b640a1bd824d21c5e21cf2dbb19f03b6a1.png",
        "花丸晴琉_丧": "emote/e45bd7cf880f36a439ef47c355c73065911992ac.png",
        "花丸晴琉_生气": "emote/dfbfccd43db22e547f62563b73ae7a474b1163a2.png",
        "花丸晴琉_晚安": "emote/40b60d5c04c8e7037089c408e68a73d51fd3dee7.png",
        "花丸晴琉_无语": "emote/ac4cf2356a708eb11199f266160cb76be129ead9.png",
        "花丸晴琉_喜欢": "emote/71a508d3183fb59f1ddf3a42af59fa7495f2c18c.png",
        "花丸晴琉_邪恶": "emote/0a8175363b7c8270836323a627b1fe437938399c.png",
        "花丸晴琉_疑惑": "emote/4aef9a2a5c9800faf2501014e1fba1fbf180b8f0.png",
        "花丸晴琉_嘤嘤": "emote/b5584ef24436d42364e7234a9cd8734e00f872f6.png",
        "花丸晴琉_赞": "emote/adf49b5e19731a8176b774f55b5472b9234ee555.png",
        "花丸晴琉_早安": "emote/c5e20c947c10bb931413b8e4bc80b2bd3b09971e.png",
        "-菫時-打Call": "live/e8073adeb52036d0d563c848c4b55b8449bc4b85.png@65w.webp",
        "-菫時-分号分号": "live/f2a7a0916015a741a192ae85ee593a39c6dd04a7.png@65w.webp",
        "-菫時-哎呀": "live/0a691aec40c738918014b27acfefa3b295b8a458.png@65w.webp",
        "-菫時-地蕾": "live/cdb1f3adeee987c1fe5303ca90443932edb23d30.png@65w.webp",
        "-菫時-困困": "live/c9450e570d7abcf5a920b65e18b9624b75c9d4fb.png@65w.webp",
        "-菫時-生气": "live/021761abdfe8dc417e5267b74877bebd43dcfd58.png@65w.webp",
        "-菫時-亲亲": "live/e0ae55eb80c6b7c01eeb042a26a3bd2938ed679a.png@65w.webp",
        "-菫時-急了": "live/bea985bcf662dc4d85c9f78633c57398b7c3d223.png@65w.webp",
        "-菫時-问号": "live/5b29c4c15e6b97da2df564899f84906fc800590b.png@65w.webp",
        "-菫時-拜比": "live/a9fa62db7b7233dac30d3abd851b992710bc1649.png@65w.webp",
        "纱依shayi_打call": "garb/4d97de8b2d6bb9cb19621af93550b3560e85277f.png@65w.webp",
        "纱依shayi_喜欢": "garb/d345b8ff2f2dcd5a4833aa613fc7849bfb25f5e2.png@65w.webp",
        "纱依shayi_晚安": "garb/f34ec93c5aa7fdb7cc919544df401474bed1a3c1.png@65w.webp",
        "纱依shayi_kira": "garb/f784e4dc7d40f3d3a7ddb6977c241ff6d6a5db26.png@65w.webp",
        "纱依shayi_贴贴": "garb/003679cdb44d37576b700f8ed0f4e85bc6ffc8a7.png@65w.webp",
        "纱依shayi_结婚": "garb/b1a9e35f04b81476d1d93fdc3979fe194e873915.png@65w.webp",
        "纱依shayi_甜蜜的": "garb/415a5fec5062816d6c316a718cf7f739dc12dcef.png@65w.webp",
        "纱依shayi_摸鱼": "garb/b7f7d09fec93dd889b9e12286989dbfa41770689.png@65w.webp",
        "纱依shayi_好厉害": "garb/7dceff9c32cb6a7a617c910cc840eaeaa89f1e60.png@65w.webp",
        "纱依shayi_开心": "garb/360612ea05619a9517f9735e10f6a8e592eb6b35.png@65w.webp",
        "纱依shayi_疑问": "garb/f591282a33cb0eb16e6ac679792ea90ce42e6d67.png@65w.webp",
        "纱依shayi_哼": "garb/538c428f2d5bcaeefa60c81bb96e9a82475a59d2.png@65w.webp",
        "纱依shayi_心碎": "garb/59697798dd454428c773ae989745af62042025ee.png@65w.webp",
        "纱依shayi_趴": "garb/5261ebff0fce07a4bde695f56b1e90e03b2a22b9.png@65w.webp",
        "纱依shayi_蹭蹭": "garb/8feb22fa3a58e7a26c31792be79fab8c015fa7f6.png@65w.webp",
        "纱依shayi_喵": "garb/9a05fc8a87b3f5f05a3c01eec984aaec0f6727e1.png@65w.webp",
        "冥冥meichan_太爱钱了": "garb/item/e3d018abc7dfcaba7a95b512d313591ec015e984.png",
        "冥冥meichan_不可以": "garb/item/5cfc0218594fbe8b2946e67e03fc4ea5c4a19d36.png",
        "冥冥meichan_优雅红茶": "garb/item/8698f417982fd8d5abadf5207407532bb1b5b44f.png",
        "冥冥meichan_哭哭": "garb/item/32817fbdd4226afe71e1aa3d8f0a91c62729567d.png",
        "冥冥meichan_不想输": "garb/item/04fdc12859be022fba9992c76f89b0956d19262d.png",
        "冥冥meichan_开车": "garb/item/3414c37849153f2ebd0fe6c8d7298bbc711c4ed9.png",
        "冥冥meichan_大钻戒": "garb/item/fa42d4a68660e6c3d6447cdf0fe7d95cc4c7cdae.png",
        "冥冥meichan_带走": "garb/item/9862fdd11fb28e2456a5cd3f864f87a46f20604f.png",
        "冥冥meichan_我好了": "garb/item/8855c3fcfc538ee1d96e9ec25f758a0b5602cf66.png",
        "冥冥meichan_嗨呀": "garb/item/caebcb782f3a8742548786cd52cb4d80d8353e03.png",
        "冥冥meichan_好喜欢哦": "garb/item/3cc66caaf1a62e1778b18a458e58b38df99cfa0f.png",
        "冥冥meichan_给你一拳": "garb/item/9b9e4aa83cedd7016bf2f2a83bbe838b648f01ff.png",
        "冥冥meichan_理发店": "garb/item/6026b23be561844d08c5bc4b2d66316c3eeebb15.png",
        "冥冥meichan_典": "garb/item/172ea06085c8d242f3105d0d04826217bbe4fbeb.png",
        "冥冥meichan_信积拉奶": "garb/item/57902ef1f2392e1b8ca4a92ee9c844c18b633009.png",
        "冥冥meichan_饭饭": "garb/item/79a5c3bda7449e06f032c095144d8218b9acb335.png",
        "冥冥meichan_盯": "garb/item/9c9419db0b80a40ab36eed395251e7efe6421b69.png",
        "冥冥meichan_流汗": "garb/item/014bd9e4519567f7f711c0ef8138ffcd022750cd.png",
        "冥冥meichan_晚安": "garb/item/4ed6aba3c606484511e550e9d8070a74c004ba8e.png",
        "冥冥meichan_mua": "garb/item/21b927b32c186a8c4dd12ff48fcb19461d8dcd0e.png",
        "冥冥meichan_关注冥冥": "garb/item/55cfde3719b757aa211e5f1d136cd8c8a1e0dc2f.png",
        "冥冥meichan_你是懂的": "garb/item/724e8fe83e63a0814995dc8fd7a5d874c0568028.png",
        "冥冥meichan_你懂个P": "garb/item/ffa551eaec65b9b3e33eb388fb91f9c02e4ff67a.png",
        "冥冥meichan_钱不够啊": "garb/item/d153516692abb248a2429319ff7eb8cff4b2d463.png",
        "冥冥meichan_寄": "garb/item/4de329afec2e0ebe3c4d0db0da710721bed35ff3.png",
        // ... 更多表情
    }
    });
</script>
<script>
    // 点击回复直接评论,官方版本点击回复时都是跳回到页面上方的评论框进行回复，评论框是固定不动的
    // 参考https://immmmm.com/valine-diy,用到jQuery
    $(document).ready(function(){
        //$('.vemoji-btn').text('😀');
        $("#vcomments").on('click', 'span.vat',function(){
            $(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
            $('textarea#veditor').focus();
        })
    })
</script>
<script type="text/javascript">
    //添加一言
   fetch('https://v1.hitokoto.cn/?c=a')
    .then(response => response.json())
    .then(data => {
      document.getElementById("veditor").setAttribute("placeholder",data.hitokoto+"__"+data.from);
    })
    .catch(console.error)
</script>
<script>
// 自定义邮箱审核规则
document.body.addEventListener('click', function (e) {
    if (e.target.classList.contains('vsubmit')) {
        const email = document.querySelector('input[type=email]');
        const nick = document.querySelector('input[name=nick]');
        const reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
        if (!email.value || !nick.value || !reg.test(email.value)) {
            const str = `<div class="valert text-center"><div class="vtext">请填写正确的昵称和邮箱！</div></div>`;
            const vmark = document.querySelector('.vmark');
            vmark.innerHTML = str;
            vmark.style.display = 'block';
            setTimeout(function () {
                vmark.style.display = 'none';
                vmark.innerHTML = '';
            }, 2500);
        }
    }
})
</script>

<style>
    #veditor {
    /*评论框背景图片*/
    box-sizing: border-box;
    background: url("/../media/images/veditor-bg.webp") 100% 100% no-repeat;
    background-size: contain;
    background-position: right;
    background-color: rgba(255, 255, 255, 0);
    }
</style>


            



</div></section>
</div></div></div><script>
"use strict";!function(){for(var n=document.getElementsByTagName("pre"),e=n.length,s=0;s<e;s++){n[s].innerHTML='<span class="line-number"></span>'+n[s].innerHTML+'<span class="cl"></span>';for(var a=n[s].innerHTML.split(/\n/).length,r=0;r<a-1;r++){n[s].getElementsByTagName("span")[0].innerHTML+="<span>"+(r+1)+"</span>"}}}();
let mainNavLinks=document.querySelectorAll(".markdownIt-TOC a");window.addEventListener("scroll",event=>{let fromTop=window.scrollY;mainNavLinks.forEach((link,index)=>{let section=document.getElementById(decodeURI(link.hash).substring(1));let nextSection=null
if(mainNavLinks[index+1]){nextSection=document.getElementById(decodeURI(mainNavLinks[index+1].hash).substring(1));}
if(section.offsetTop<=fromTop){if(nextSection){if(nextSection.offsetTop>fromTop){link.classList.add("currentToc");}else{link.classList.remove("currentToc");}}else{link.classList.add("currentToc");}}else{link.classList.remove("currentToc");}});});
var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight",progress=document.querySelector(".progress"),scroll;document.addEventListener("scroll",function(){scroll=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100;progress.style.setProperty("--scroll",scroll+"%")});
var wxScale=new WxScale({fullPage:document.querySelector("#fullPage"),canvas:document.querySelector("#canvas")});var imgBox=document.querySelectorAll("#md_block img");for(var i=0;i<imgBox.length;i++){imgBox[i].onclick=function(e){wxScale.start(this)}};
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
<div id="aplayer" class="aplayer" data-autoplay="true"  data-id="56868" data-server="netease" data-type="album" data-fixed="true" data-listfolded="true" data-order="random" data-theme="#F58EA8"></div>
<script src="https://unpkg.com/meting@1.2.0/dist/Meting.min.js"></script>


<a id="scrollUp" href="#" style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"><a href="https://weibo.com/6392902197"title="weibo"><i class="iconfont icon-weibo"></i></a><a href="https://github.com/xiaxi626"title="github"><i class="iconfont icon-github"></i></a><a href="aijiang1220966821@163.com"title="envelope"><i class="iconfont icon-envelope"></i></a><a href="https://xiaxi626.github.io/atom.xml"title="rss"><i class="iconfont icon-rss"></i></a><a href="https://www.zhihu.com/people/xiao-yan-shi-36"title="zhihu"><i class="iconfont icon-zhihu"></i></a></div></div><div class="copyright"id="copyright">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>Copyright © <a href="https://xiaxi626.github.io" style="margin:0;">飞爱碧玉的个人博客</a>.</div>
<div><div class="github-badge"><a href="https://open.gridea.dev" target="_blank" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Gridea</span></a></div><div style="display: inline-block">&nbsp;</div><div class="github-badge"><a href="https://github.com/Wu-jiyan/gridea-theme-bitcron-pro-plus" target="_blank" rel="nofollow"><span class="badge-subject">Theme</span><span class="badge-value bg-green">Bitcron Pro Plus</span></a></div></div>
<span style="display: inline;margin-right:15px;">👁<strong><span id="busuanzi_value_site_pv"></span></strong></span>
<span style="display: inline;margin-right:15px;">👤<strong><span id="busuanzi_value_site_uv"></span></strong></span>
<span>📚<strong>63</strong> posts</span>
</div></div>
<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.min.js" type="module" defer></script>




<script>
//复制内容自动添加版权信息 
 var Sys = {}; 
    var ua = navigator.userAgent.toLowerCase(); 
    if( window.ActiveXObject ) 
    { 
        document.body.oncopy=function() 
        { 
            event.returnValue = false; 
            var t=document.selection.createRange().text; 
            var s="\r\n原文出自 [飞爱碧玉的个人博客]  转载请保留原文链接: "+location.href; 
            clipboardData.setData('Text',t+'\r\n'+s); 
        } 
    } 
    else 
    { 
        function addLink() 
        { 
            var body_element = document.getElementsByTagName('body')[0]; 
            var selection; 
            selection = window.getSelection(); 
            var pagelink = " 原文出自 [飞爱碧玉的个人博客]  转载请保留原文链接: "+document.location.href; 
 
            var copytext = selection + pagelink; 
            var newdiv = document.createElement('div'); 
            newdiv.style.position='absolute'; 
            newdiv.style.left='-99999px'; 
            body_element.appendChild(newdiv); 
            newdiv.innerHTML = copytext; 
            selection.selectAllChildren(newdiv); 
            window.setTimeout 
            ( 
                function() 
                { 
                    body_element.removeChild(newdiv); 
                },0 
            ); 
        } 
        document.oncopy = addLink; 
    } 
</script>

<script type="text/javascript" async src="https://xiaxi626.github.io/media/js/prism.js"></script>
</body>
</html>
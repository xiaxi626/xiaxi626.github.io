
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>FFmpegéŸ³é¢‘å¤„ç† | é£çˆ±ç¢§ç‰çš„ä¸ªäººåšå®¢</title>
<meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.1/css/all.css" crossorigin="anonymous">
<link rel="shortcut icon" href="https://xiaxi626.github.io/favicon.ico?v=1708146931921">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://xiaxi626.github.io/styles/main.css">

<script src="https://xiaxi626.github.io/media/scripts/vue.js"></script>
<script src="https://xiaxi626.github.io/media/scripts/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
  </head>
  <body>
    <div class="carousel carousel-slider center index-cover" data-indicators="true">
    <div class="bg-cover pd-header" style="background: url('https://xiaxi626.github.io/post-images/ffmpeg-yin-pin-chu-li.jpg') no-repeat center center fixed" data-link="https://xiaxi626.github.io/post/ffmpeg-yin-pin-chu-li/">
        <div class="container">
            <div class="row">
                <div class="col s10 offset-s1 m8 offset-m2 l8 offset-l2">
                    <div class="brand">
                        <div class="title center-align">
                            FFmpegéŸ³é¢‘å¤„ç†
                        </div>
                        <div class="description center-align">
                            <span id="subtitle">
                                
                            </span><span class="typed-cursor">|</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
<script>
    window.onload = function () {
        var typed = new Typed("#subtitle", {
            strings: [ 
                
                    "ä»æ¥æ²¡æœ‰çœŸæ­£çš„ç»å¢ƒ, åªæœ‰å¿ƒçµçš„è¿·é€”",
                
                    '',

            ],
            startDelay: 300,
            typeSpeed: 100,
            loop: true,
            backSpeed: 50,
            showCursor: true
        });
        let cover = document.querySelector('.bg-cover');
        cover.setAttribute('style', `background: url('${localStorage[cover.dataset.link]}') no-repeat center center fixed`);
    }
</script>


    <div class="toc-body hide">  
        <div class="toc"></div>
    </div>
    <div id="floating-toc-btn">
        <i class="fas fa-list-ul bg-color"></i>
    </div>
    <div id="app" class="main">
      <div class="site-header-container nav-transparent">
  <div class="site-header">
    <div class="left">
      <a href="https://xiaxi626.github.io">
        <img class="avatar" src="https://xiaxi626.github.io/images/avatar.png?v=1708146931921" alt=""
          width="32px" height="32px">
      </a>
      <a href="https://xiaxi626.github.io">
        <h1 class="site-title">
          é£çˆ±ç¢§ç‰çš„ä¸ªäººåšå®¢
        </h1>
      </a>
    </div>
    <div class="right">
        <div class="menu">
            <a href="/post/about" v-if="headSearchShow">
                <i class="fa-solid fa-user"></i>&nbsp;ä¸ªäºº
            </a>
            <a href="/archives" v-if="headSearchShow">
                <i class="fa-solid fa-box-archive"></i>&nbsp;å½’æ¡£
            </a>
            <a href="/tags" v-if="headSearchShow">
                <i class="fa-solid fa-tag"></i>&nbsp;æ ‡ç­¾
            </a>
            <a href="/life" v-if="headSearchShow">
                <i class="fa-fw fas fa-heart"></i>&nbsp;ç”Ÿæ´»
            </a>
            
        </div>
      <div class="gridea-search-div" v-if="headSearchShow">
        <form id="gridea-search-form" action="https://xiaxi626.github.io/search/">
          <input class="gridea-search-input" autocomplete="off" spellcheck="false" name="q" />
        </form>
      </div>
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }"
          @click="menuClick()" v-if="menuSearchShow"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      <div class="gridea-search-div" v-if="menuSearchShow">
        <form id="gridea-search-form" action="https://xiaxi626.github.io/search/">
          <input class="gridea-search-input" autocomplete="off" spellcheck="false" name="q" />
        </form>
      </div>
      
        
            <a href="/" class="menu purple-link">
              é¦–é¡µ
            </a>
            
              
        
            <a href="/archives" class="menu purple-link">
              å½’æ¡£
            </a>
            
              
        
            <a href="/tags" class="menu purple-link">
              æ ‡ç­¾
            </a>
            
              
        
            <a href="/post/about" class="menu purple-link">
              å…³äº
            </a>
            
              
        
            <a href="/friends" class="menu purple-link">
              å‹æƒ…é“¾æ¥
            </a>
            
              
              
    </div>
  </div>
</transition>

<script>
    window.onscroll = function () {
        var t = document.documentElement.scrollTop || document.body.scrollTop;
        var header = document.querySelector('.site-header-container');
        if (t > 0) {
            header.classList.remove('nav-transparent');
        } else {
            header.classList.add('nav-transparent');
        }
    }
</script>

      <div class="content-body">
        <div class="content-container content-card">
            <div class="post-detail">
              <div class="post-info post-detail-info">
                <span><i class="icon-calendar-outline"></i> 2021-11-02</span>
                
                  <span>
                    
                        <i class="icon-pricetags-outline"></i>
                      <a href="https://xiaxi626.github.io/tag/JcIpV52xSP/">
                        Technology
                      </a>
                    
                  </span>
                
              </div>
              
              <hr class="clear">
              <div class="post-content">
                <h2 id="éŸ³é¢‘ä¿¡æ¯">éŸ³é¢‘ä¿¡æ¯</h2>
<h3 id="æŸ¥çœ‹éŸ³é¢‘ä¿¡æ¯">æŸ¥çœ‹éŸ³é¢‘ä¿¡æ¯</h3>
<pre><code class="language-bash">ffmpeg -i video.mp4
</code></pre>
<h3 id="æŸ¥çœ‹ç½‘ç»œè§†é¢‘çš„ä¿¡æ¯">æŸ¥çœ‹ç½‘ç»œè§†é¢‘çš„ä¿¡æ¯</h3>
<pre><code class="language-bash">ffmpeg -i http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4
</code></pre>
<h2 id="æŸ¥çœ‹éŸ³é¢‘çš„å¸ƒå±€æƒ…å†µ">æŸ¥çœ‹éŸ³é¢‘çš„å¸ƒå±€æƒ…å†µ</h2>
<pre><code class="language-bash">ffmpeg -layouts
</code></pre>
<h2 id="éŸ³é¢‘æŠ½å–">éŸ³é¢‘æŠ½å–</h2>
<h3 id="ä»è§†é¢‘æ–‡ä»¶ä¸­æŠ½å–éŸ³é¢‘">ä»è§†é¢‘æ–‡ä»¶ä¸­æŠ½å–éŸ³é¢‘</h3>
<h4 id="æå–å®Œæ•´éŸ³é¢‘">æå–å®Œæ•´éŸ³é¢‘</h4>
<pre><code class="language-bash">ffmpeg -i sample.mp4 -q:a 0 -map a sample.mp3
</code></pre>
<h4 id="æå–æŒ‡å®šæ—¶é—´æ®µçš„éŸ³é¢‘">æå–æŒ‡å®šæ—¶é—´æ®µçš„éŸ³é¢‘</h4>
<pre><code class="language-bash">ffmpeg -i sample.mp4 -ss 00:03:05 -t 00:00:45.0 -q:a 0 -map a sample.mp3
</code></pre>
<h4 id="ä¸é‡æ–°ç¼–ç ">ä¸é‡æ–°ç¼–ç </h4>
<p>æå–æ ¼å¼ä¸èƒ½ä¸ºMP3ï¼Œå¯ä»¥æ˜¯aacå’Œm4aï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<pre><code class="language-bash">ffmpeg -i input-video.avi -vn -acodec copy output-audio.aac
</code></pre>
<p>-acodec è¡¨ç¤ºéŸ³é¢‘è§£ç æ–¹å¼ï¼Œ-vnè¡¨ç¤ºå»é™¤è§†é¢‘</p>
<h4 id="é‡æ–°ç¼–ç ">é‡æ–°ç¼–ç </h4>
<p>ä¸‹é¢æ˜¯å¦‚ä½•ä½¿ç”¨FFmpegä»è§†é¢‘ä¸­æå–éŸ³é¢‘ï¼Œç„¶åä½¿ç”¨libmp3lameå°†éŸ³é¢‘ç¼–ç ä¸ºä¸åŒçš„è´¨é‡ï¼Œå¹¶å°†å…¶å­˜å‚¨ä¸ºmp3æ–‡ä»¶ã€‚</p>
<pre><code class="language-bash">ffmpeg.exe -i videoWithAudio.mp4 -vn -c:a libmp3lame -q:a 1 onlyAudio.mp3
</code></pre>
<p>-q:aè¡¨ç¤ºè´¨é‡ï¼ˆåœ¨LAMEæ–‡æ¡£ä¸­å®šä¹‰[1]ï¼‰ï¼Œè´¨é‡åˆ†å¸ƒèŒƒå›´ä¸º0~6ï¼Œå…¶ä¸­0è¡¨ç¤ºé«˜è´¨é‡éŸ³é¢‘ï¼Œ6è¡¨ç¤ºä½è´¨é‡éŸ³é¢‘ã€‚</p>
<h3 id="ä»ç½‘ç»œè§†é¢‘æ–‡ä»¶ä¸­æŠ½å–éŸ³é¢‘">ä»ç½‘ç»œè§†é¢‘æ–‡ä»¶ä¸­æŠ½å–éŸ³é¢‘</h3>
<pre><code class="language-bash">ffmpeg -i http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4 -acodec copy -vn out_net.mp4
</code></pre>
<p>-acodec ç”¨äºéŸ³é¢‘çš„ç¼–ç è®¾ç½®</p>
<h2 id="åˆå¹¶">åˆå¹¶</h2>
<h3 id="ä¸€ç§æ–¹æ³•æ˜¯è¿æ¥åˆ°ä¸€èµ·">ä¸€ç§æ–¹æ³•æ˜¯è¿æ¥åˆ°ä¸€èµ·</h3>
<pre><code class="language-bash">ffmpeg64.exe -i &quot;concat:123.mp3|124.mp3&quot; -acodec copy output.mp3
</code></pre>
<p>è§£é‡Šï¼š-iä»£è¡¨è¾“å…¥å‚æ•°<br>
contact:123.mp3|124.mp3ä»£è¡¨ç€éœ€è¦è¿æ¥åˆ°ä¸€èµ·çš„éŸ³é¢‘æ–‡ä»¶<br>
-acodec copy output.mp3 é‡æ–°ç¼–ç å¹¶å¤åˆ¶åˆ°æ–°æ–‡ä»¶ä¸­</p>
<h3 id="å¦ä¸€ç§æ–¹æ³•æ˜¯æ··åˆåˆ°ä¸€èµ·">å¦ä¸€ç§æ–¹æ³•æ˜¯æ··åˆåˆ°ä¸€èµ·</h3>
<pre><code class="language-bash">ffmpeg64.exe -i 124.mp3 -i 123.mp3 -filter_complex amix=inputs=2:duration=first:dropout_transition=2 -f mp3 remix.mp3
</code></pre>
<p>è§£é‡Šï¼š-iä»£è¡¨è¾“å…¥å‚æ•°<br>
-filter_complex ffmpegæ»¤é•œåŠŸèƒ½ï¼Œéå¸¸å¼ºå¤§ï¼Œè¯¦ç»†è¯·æŸ¥çœ‹æ–‡æ¡£<br>
amixæ˜¯æ··åˆå¤šä¸ªéŸ³é¢‘åˆ°å•ä¸ªéŸ³é¢‘è¾“å‡º<br>
inputs=2ä»£è¡¨æ˜¯2ä¸ªéŸ³é¢‘æ–‡ä»¶ï¼Œå¦‚æœæ›´å¤šåˆ™ä»£è¡¨å¯¹åº”æ•°å­—<br>
duration ç¡®å®šæœ€ç»ˆè¾“å‡ºæ–‡ä»¶çš„é•¿åº¦<br>
longest(æœ€é•¿)|shortestï¼ˆæœ€çŸ­ï¼‰|firstï¼ˆç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼‰<br>
dropout_transition<br>
The transition time, in seconds, for volume renormalization when an input stream ends. The default value is 2 seconds.<br>
-f mp3  è¾“å‡ºæ–‡ä»¶æ ¼å¼</p>
<h2 id="åˆ é™¤éŸ³é¢‘">åˆ é™¤éŸ³é¢‘</h2>
<h3 id="åˆ é™¤è§†é¢‘ä¸­çš„éŸ³é¢‘">åˆ é™¤è§†é¢‘ä¸­çš„éŸ³é¢‘</h3>
<p>åªå°†è§†é¢‘å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶ä¸­ï¼Œè€Œä¸å¤åˆ¶éŸ³é¢‘ã€‚</p>
<pre><code class="language-bash">ffmpeg.exe -i videoWithAudio.mp4 -c:v copy -an videoWithoutAudio.mp4
</code></pre>
<ul>
<li>ä½¿ç”¨-c:v copyå‘½ä»¤å°†è§†é¢‘å¤åˆ¶åˆ°videoWithoutAudio.mp4</li>
<li>-anå‘Šè¯‰FFmpegä¸è¦å¤åˆ¶éŸ³é¢‘</li>
</ul>
<p>ä¸Šè¿°æ–¹æ³•éå¸¸é€‚ç”¨äºç”µå½±ä¸­åªæœ‰ä¸€ä¸ªéŸ³è½¨çš„æƒ…å†µã€‚</p>
<h3 id="åˆ é™¤æŸä¸ªç‰¹å®šéŸ³è½¨">åˆ é™¤æŸä¸ªç‰¹å®šéŸ³è½¨</h3>
<p>ä½ å¯ä»¥ä½¿ç”¨FFmpegä¸­çš„mapå‘½ä»¤æ¥åˆ é™¤ç‰¹å®šéŸ³è½¨ã€‚</p>
<p>mapå‘½ä»¤çš„é€šç”¨è¯­æ³•æ˜¯ï¼š</p>
<p><code>-map input_file_index:stream_type_specifier:stream_index</code></p>
<p>ç„¶åï¼Œä½ å¯ä»¥é€šè¿‡<code>-map 0:a:1</code>ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰ä»è§†é¢‘ä¸­é€‰æ‹©ç¬¬äºŒä¸ªéŸ³è½¨ã€‚åœ¨ä¸Šæ–‡çš„ä¾‹å­ä¸­ï¼Œå¦‚æœä½ çš„æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªè§†é¢‘å’Œä¸¤ä¸ªéŸ³è½¨ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ä½¿ç”¨<code>-map 0:a:1</code>åªé€‰æ‹©ç¬¬äºŒä¸ªéŸ³è½¨ï¼Œå¹¶å°†å®ƒå¤åˆ¶åˆ°ä½ çš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ä¸­ã€‚</p>
<p>åŒæ ·ï¼Œ-map 0æ˜¯æŒ‡é€‰æ‹©ç¬¬ä¸€ä¸ªè¾“å…¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬éŸ³é¢‘å’Œè§†é¢‘ï¼‰ï¼Œæ‰€ä»¥ä½ éœ€è¦å…ˆé€‰æ‹©æ‰€æœ‰æ•°æ®ï¼Œç„¶åå–æ¶ˆé€‰æ‹©éŸ³é¢‘ã€‚</p>
<pre><code class="language-bash">ffmpeg.exe -i videoWithAudio.mp4 -map 0 -map 0:a:1 -copy videoOutput.mp4
</code></pre>
<p>å¦‚æœç”µå½±ä¸­æœ‰5ä¸ªéŸ³è½¨ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªï¼Œå…¶ä»–ä½ éƒ½æƒ³é€‰æ‹©ã€‚è¿™ä¸ªæ—¶å€™ä½ å¯ä»¥ä½¿ç”¨åå‘çš„mapå‘½ä»¤ï¼ˆåœ¨mapå‘½ä»¤çš„å‚æ•°å‰åŠ è´Ÿå·ï¼‰ã€‚ä½¿ç”¨<code>-map -0:a:0</code> è¿™ä¸€å‘½ä»¤ï¼ŒFFmpegåœ¨é€‰æ‹©æ—¶å°±ä¼šå¿½ç•¥ç¬¬ä¸€ä¸ªéŸ³è½¨ã€‚åå‘çš„mapéå¸¸å¼ºå¤§ï¼</p>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å·²åœ¨å‰æ–‡å­¦ä¹ äº†ä½¿ç”¨ -anå‘½ä»¤ä»è§†é¢‘ä¸­åˆ é™¤éŸ³é¢‘ã€‚ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œä½¿ç”¨åå‘çš„mapæ¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚</p>
<pre><code class="language-bash">ffmpeg -i videoWithAudio.mp4 -map 0 -map -0:a videoWithoutAudio.mp4
</code></pre>
<h2 id="æ·»åŠ éŸ³é¢‘">æ·»åŠ éŸ³é¢‘</h2>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio.mp3 -c copy -map 0:v:0 -map 1:a:0 
videoWithAudio.mp4
</code></pre>
<p>ä½¿ç”¨mapå‘½ä»¤å°†è§†é¢‘å’ŒéŸ³é¢‘åˆ†åˆ«ä»ä¸åŒçš„æ–‡ä»¶ä¸­å¤åˆ¶åˆ°åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ã€‚</p>
<ul>
<li><code>-map 0:v:0</code> é€‰æ‹©äº†ç¬¬0ä¸ªè¾“å…¥æ–‡ä»¶ï¼ˆè§†é¢‘è¾“å…¥ï¼‰çš„ç¬¬0ä¸ªè½¨é“ã€‚</li>
<li><code>â€“map 1:a:0</code> é€‰æ‹©äº†ç¬¬ä¸€ä¸ªè¾“å…¥æ–‡ä»¶ï¼ˆéŸ³é¢‘è¾“å…¥ï¼‰çš„ç¬¬0ä¸ªè½¨é“ã€‚</li>
<li>ä¸ç”¨é‡æ–°ç¼–ç ï¼Œ-c copyåŒæ—¶å¤åˆ¶éŸ³è½¨å’Œè§†è½¨åˆ°è¾“å‡ºæ–‡ä»¶ã€‚å¦‚æœä½ æƒ³è¦é‡æ–°ç¼–ç ï¼Œå¯ä»¥é€‰æ‹©åˆé€‚çš„éŸ³è§†é¢‘ç¼–è§£ç å™¨ï¼Œé…ç½®ç›¸åº”çš„ç¼–ç è´¨é‡ã€‚</li>
</ul>
<h2 id="æ›¿æ¢éŸ³é¢‘">æ›¿æ¢éŸ³é¢‘</h2>
<p>è¯·çœ‹ä¸‹åˆ—å‘½ä»¤è¡Œï¼š<br>
<code>-map input_file_index:stream_type_specifier:stream_index.</code><br>
æ‰€ä»¥ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>-map 1:a:2</code>æ¥é€‰æ‹©ç¬¬äºŒä¸ªè¾“å…¥æ–‡ä»¶ä¸­çš„ç¬¬ä¸‰ä¸ªéŸ³è½¨ï¼Œå› ä¸ºè®¡æ•°ä»0å¼€å§‹ã€‚</p>
<pre><code class="language-bash">ffmpeg -i video_with_audio.mp4 -i newAudio.wav -map 0:0 -map 1:0 -c:v copy -c:a libmp3lame -q:a 1 -shortest  video_with_newAudio.mp4
</code></pre>
<p>åœ¨ä¸Šæ–‡çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è·å–è§†é¢‘ä»¥åŠå¦ä¸€ä¸ªæ–‡ä»¶ä¸­è·å–éŸ³é¢‘ã€‚è€Œmapå‘½ä»¤éå¸¸ä¾¿æ·åœ°å®Œæˆäº†ä¸Šè¿°æ“ä½œã€‚æˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªè¾“å…¥æ–‡ä»¶ï¼ˆè§†é¢‘ï¼‰ä¸­é€‰æ‹©ç¬¬0ä¸ªè½¨é“ï¼Œå¹¶ä»ç¬¬2ä¸ªè¾“å…¥æ–‡ä»¶ï¼ˆéŸ³é¢‘ï¼‰ä¸­é€‰æ‹©ç¬¬0ä¸ªè½¨é“ã€‚</p>
<p>ç„¶åæˆ‘ä»¬åŸæ ·å¤åˆ¶è§†é¢‘å¹¶é‡æ–°ç¼–ç éŸ³é¢‘ï¼Œå†å°†å®ƒä»¬ä¸€èµ·æ”¾å…¥æ–°çš„æ–‡ä»¶ä¸­ã€‚å¦‚æœä½ ä¸æƒ³é‡æ–°ç¼–ç éŸ³é¢‘ï¼Œä½ åªéœ€ä½¿ç”¨-a:c copyå‘½ä»¤ï¼Œé‚£ä¹ˆéŸ³é¢‘å°±åªè¢«å¤åˆ¶è€Œä¸ä¼šé‡æ–°ç¼–ç ã€‚</p>
<p>-shortestå‘½ä»¤ç”¨äºç¡®ä¿å½“è¾¾åˆ°è¾ƒçŸ­çš„è¾“å…¥æ–‡ä»¶ï¼ˆä¸¤ä¸ªè¾“å…¥æ–‡ä»¶ä¹‹ä¸€ï¼‰é•¿åº¦æ—¶åœæ­¢è½¬æ¢ã€‚å¦‚æœè¿™ä¸ªåŠŸèƒ½åœ¨ä½ çš„ç”¨ä¾‹ä¸­æ— å…³ç´§è¦ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä¸ä½¿ç”¨è¿™ä¸€å‘½ä»¤ã€‚</p>
<h2 id="ç»˜åˆ¶éŸ³é¢‘æ³¢å½¢å›¾">ç»˜åˆ¶éŸ³é¢‘æ³¢å½¢å›¾</h2>
<h3 id="ç»˜åˆ¶å¤šå£°é“æ··åˆçš„éŸ³é¢‘æ³¢å½¢å›¾">ç»˜åˆ¶å¤šå£°é“æ··åˆçš„éŸ³é¢‘æ³¢å½¢å›¾</h3>
<pre><code class="language-bash">ffmpeg -i music.mp3 -filter_complex &quot;showwavespic=s=640*120&quot; -frames:v 1 output.png
</code></pre>
<h3 id="ç»˜åˆ¶ä¸åŒå£°é“çš„æ³¢å½¢å›¾">ç»˜åˆ¶ä¸åŒå£°é“çš„æ³¢å½¢å›¾</h3>
<pre><code class="language-bash">ffmpeg -i 1.mp3 -filter_complex &quot;showwavespic=s=640*240:split_channels=1&quot; -frames:v 1 output.png
</code></pre>
<h2 id="ä½¿ç”¨å¤šåª’ä½“æ»¤é•œ-ebur128åˆ†æéŸ³é¢‘å“åº¦å˜åŒ–">ä½¿ç”¨å¤šåª’ä½“æ»¤é•œ ebur128åˆ†æéŸ³é¢‘å“åº¦å˜åŒ–</h2>
<p>ebur128æ‰«ææ»¤é•œã€‚è¿™ä¸ªæ»¤é•œéœ€è¦ä¸€ä¸ªéŸ³é¢‘æµï¼Œä½†ä¼šåŸæ ·è¾“å‡ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¥10Hzçš„é¢‘ç‡è®°å½•ä¸€æ¡æ¶ˆæ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ç¬æ—¶å“åº¦(ç”±Mæ ‡è¯†)ã€çŸ­æœŸå“åº¦(S)ã€ç»¼åˆå“åº¦(I)å’Œå“åº¦èŒƒå›´(LRA)ã€‚</p>
<p>æ»¤é•œæœ‰ä¸ªå®æ—¶çš„è¾“å‡ºï¼Œå±•ç¤ºå“åº¦çš„å˜åŒ–ï¼Œä¸»è¦çš„ç»˜å›¾åŒºåŸŸåŒ…å«çŸ­æœŸå“åº¦ï¼ˆ3ç§’åˆ†æï¼‰ï¼Œä»¥åŠå…¶åçš„èˆ’é€‚å“åº¦ï¼ˆ400æ¯«ç§’ï¼‰</p>
<p>å…·ä½“å‚æ•°ï¼šhttps://ffmpeg.org/ffmpeg-all.html#ebur128-1</p>
<pre><code class="language-bash">ffmpeg -nostats -i stars.mp3 -filter_complex ebur128 -f null -
</code></pre>
<p>åŠ -reportå¯æŠŠç»“æœè¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶</p>
<p><strong>åˆ©ç”¨EBUæ”¾ç¼©è§„æ¨¡è®¡+18dçš„å®æ—¶å›¾åƒ</strong></p>
<p><code>ffplay -f lavfi -i &quot;amovie=input.mp3,ebur128=video=1:meter=18 [out0][out1]&quot;</code></p>
<h2 id="æ”¹å˜æ ¼å¼">æ”¹å˜æ ¼å¼</h2>
<pre><code class="language-bash">ffmpeg -i audio.mp3 -f ogg out.ogg
</code></pre>
<p>-f oggè¡¨ç¤ºç¼–ç æ ¼å¼æ˜¯ogg</p>
<h2 id="æ”¹å˜é‡‡æ ·ç‡">æ”¹å˜é‡‡æ ·ç‡</h2>
<pre><code class="language-bash">ffmpeg -i audio.mp3 -ar 8000 out.mp3
</code></pre>
<p>-ar ç”¨äºè®¾ç½®éŸ³é¢‘é‡‡æ ·ç‡</p>
<h2 id="æ”¹å˜æ¯”ç‰¹ç‡">æ”¹å˜æ¯”ç‰¹ç‡</h2>
<pre><code class="language-bash">ffmpeg -i audio.mp3 -ab 5000 out.mp3
</code></pre>
<p>-ab ç”¨äºè®¾ç½®éŸ³é¢‘æ¯”ç‰¹ç‡</p>
<h2 id="ç‰‡æ®µæˆªå–">ç‰‡æ®µæˆªå–</h2>
<p>-ss è¡¨ç¤ºå¼€å§‹æ—¶é—´ï¼ˆæ—¶ï¼šåˆ†ï¼šç§’ï¼‰ï¼Œ-to è¡¨ç¤ºç»“æŸæ—¶é—´ï¼ˆæ—¶ï¼šåˆ†ï¼šç§’ï¼‰ï¼Œ-t è¡¨ç¤ºæˆªå–æ—¶é•¿ï¼ˆæ—¶ï¼šåˆ†ï¼šç§’ï¼‰</p>
<pre><code class="language-bash">ffmpeg -i audio.mp3 -ss 0:0:10 -to 0:0:20 out.mp3
ffmpeg -i audio.mp3 -ss 0:0:10 -t 0:0:20 out.mp3
</code></pre>
<p>ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</p>
<pre><code class="language-bash">ffmpeg -i audio.mp3 -ss 10 -t 20 out.mp3
</code></pre>
<p>-ssç”¨äºè®¾ç½®å¼€å§‹æ—¶é—´ï¼Œ-tç”¨äºè®¾ç½®æŒç»­æ—¶é—´</p>
<h2 id="éŸ³é¢‘å£°é“">éŸ³é¢‘å£°é“</h2>
<h3 id="æ”¹å˜å£°é“">æ”¹å˜å£°é“</h3>
<pre><code class="language-bash">ffmpeg -i audio.mp3 -ac 1 out.mp3
</code></pre>
<p>-ac ç”¨äºè®¾ç½®å£°é“ï¼Œ1è¡¨ç¤ºå•å£°é“ï¼Œ2è¡¨ç¤ºç«‹ä½“å£°</p>
<h3 id="åŒå£°é“åˆå¹¶å•å£°é“">åŒå£°é“åˆå¹¶å•å£°é“</h3>
<pre><code class="language-bash">ffmpeg -i music.mp3 -ac 1 music.aac
</code></pre>
<h3 id="å•å£°é“è½¬åŒå£°é“">å•å£°é“è½¬åŒå£°é“</h3>
<pre><code class="language-bash">ffmpeg -i left.aac -ac 2 output.m4a
</code></pre>
<h3 id="åŒå£°é“çš„æå–">åŒå£°é“çš„æå–</h3>
<p>-map_channel [input_file_id.stream_specifier.channel_id|-1][?][:output_file_id.stream_specifier]<br>
<strong>æ–¹å¼ä¸€ï¼š</strong></p>
<pre><code class="language-bash">ffmpeg -i music.mp3 -map_channel 0.0.0 letf.aac -map_channel 0.0.1 right.aac
</code></pre>
<p><strong>æ–¹å¼äºŒï¼š</strong><br>
<a href="http://ffmpeg.org/ffmpeg-all.html#pan-1">ä½¿ç”¨panæ»¤é•œ</a></p>
<pre><code class="language-bash">ffmpeg -i music.mp3 -filter_complex &quot;[0:0]pan=1c|c0=c0[left];[0:0]pan=1c|c0=c1[right]&quot; -map &quot;[left]&quot; left.aac -map &quot;[right]&quot; right.aac -y
</code></pre>
<h3 id="åŒå£°é“è½¬åŒéŸ³é¢‘æµæŠŠåŒå£°é“éŸ³é¢‘æå–å‡ºæ¥è½¬ä¸ºä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶ä¸¤ä¸ªéŸ³é¢‘æµ">åŒå£°é“è½¬åŒéŸ³é¢‘æµï¼ŒæŠŠåŒå£°é“éŸ³é¢‘æå–å‡ºæ¥è½¬ä¸ºä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶ä¸¤ä¸ªéŸ³é¢‘æµ</h3>
<pre><code class="language-bash">ffmpeg -i music.mp3 -filter_complex channelsplit=channel_layout=stereo output.mka
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„è§†é¢‘å°±åŒ…å«äº†ä¸¤ä¸ªæµï¼Œå¤§å¤šé»˜è®¤æƒ…å†µä¸‹æ’­æ”¾å™¨åªä¼šæ’­æ”¾ç¬¬ä¸€ä¸ªæµ</p>
<h3 id="å°†ä¸¤ä¸ªéŸ³é¢‘æºåˆå¹¶ä¸ºåŒå£°é“">å°†ä¸¤ä¸ªéŸ³é¢‘æºåˆå¹¶ä¸ºåŒå£°é“</h3>
<pre><code class="language-bash">ffmpeg -i left.aac -i right.aac -filter_complex &quot;[0:a][1:a]amerge=inputs=2[aout]&quot; -map &quot;[aout]&quot; output.mka
</code></pre>
<p>//mkaä¸ºaccç¼–ç æ ¼å¼</p>
<h2 id="éŸ³é¢‘éŸ³é‡">éŸ³é¢‘éŸ³é‡</h2>
<h3 id="éŸ³é¢‘éŸ³é‡æ¢æµ‹">éŸ³é¢‘éŸ³é‡æ¢æµ‹</h3>
<pre><code class="language-bash">ffmpeg -i test.mp4 -filter_complex volumedetect -c:v copy -f null /dev/null
</code></pre>
<p>mean_volumeä¸ºè·å¾—éŸ³é¢‘çš„å¹³å‡å¤§å°</p>
<h3 id="éŸ³é‡è®¾ç½®">éŸ³é‡è®¾ç½®</h3>
<h4 id="ä½¿ç”¨-volé€‰é¡¹">ä½¿ç”¨-volé€‰é¡¹</h4>
<pre><code class="language-bash">ffmpeg -i music.mp3 -vol 30 sound_low.mp3
</code></pre>
<p>-volé€‰é¡¹æ¥å—ä»0åˆ°256çš„æ•´æ•°å€¼ï¼Œå…¶ä¸­256æ˜¯æœ€å¤§å€¼</p>
<h4 id="ä½¿ç”¨è¡¨ä¸­æè¿°çš„å·è¿‡æ»¤å™¨">ä½¿ç”¨è¡¨ä¸­æè¿°çš„å·è¿‡æ»¤å™¨</h4>
<p><strong>éŸ³é‡é™ä½åˆ°ä¸‰åˆ†ä¹‹äºŒ</strong></p>
<pre><code class="language-bash">ffmpeg -i music.mp3 -af volume=2/3 quiet_music.mp3
</code></pre>
<p><strong>å¢åŠ 10åˆ†è´çš„éŸ³é‡</strong></p>
<pre><code class="language-bash">ffmpeg -i music.mp3 -af volume=10dB louder_sound.mp3
</code></pre>
<h2 id="åŠ å¿«å‡æ…¢éŸ³é¢‘èŠ‚å¥">åŠ å¿«/å‡æ…¢éŸ³é¢‘èŠ‚å¥</h2>
<h3 id="åŠ å¿«">åŠ å¿«</h3>
<p><code>ffplay music.mp3 -af atempo=1.5</code></p>
<h3 id="å‡æ…¢">å‡æ…¢</h3>
<p><code>ffplay music.mp3 -af atempo=0.5</code></p>
<h2 id="chorus-ç»™å£°éŸ³æ·»åŠ åˆå”±æ•ˆæœ">chorus ç»™å£°éŸ³æ·»åŠ åˆå”±æ•ˆæœ</h2>
<p>å¯ä»¥è®©ç‹¬å”±å˜å¾—åƒåˆå”±ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºä»ªè¡¨ã€‚</p>
<p>åˆå”±ä¸å›å£°æ•ˆåº”éƒ½æœ‰çŸ­å»¶è¿Ÿ,ä½†æ˜¯å›æ³¢å»¶è¿Ÿæ˜¯å¸¸æ•°,åˆå”±åˆ™é‡‡ç”¨ä¸åŒçš„æ­£å¼¦æˆ–ä¸‰è§’è°ƒåˆ¶ã€‚è°ƒåˆ¶æ·±åº¦èŒƒå›´å®šä¹‰äº†è°ƒåˆ¶å»¶è¿Ÿ(æ’­æ”¾ä¹‹å‰æˆ–ä¹‹åçš„å»¶è¿Ÿ)ã€‚å› æ­¤å»¶è¿Ÿçš„å£°éŸ³å¬èµ·æ¥è¾ƒæ…¢æˆ–æ›´å¿«,è¿™æ˜¯åŸæ¥å‘¨å›´çš„å»¶è¿Ÿè°ƒæ•´å£°éŸ³,åƒæ˜¯æœ‰ä¸€ä¸ªä¸åˆå”±æ•´ä½“ç•¥å¾®å·®å¼‚ã€‚</p>
<p>å®ƒæ¥å—ä¸‹é¢çš„å‚æ•°ï¼ˆæ¯ä¸ªå‚æ•°é¡¹å¦‚æœæœ‰å¤šä¸ªå¯èƒ½å€¼ç”¨|åˆ†éš”ï¼‰ï¼š</p>
<p>in_gain</p>
<p>è®¾ç½®è¾“å‡ºå¢ç›Šï¼Œé»˜è®¤0.4</p>
<p>out_gain</p>
<p>è®¾ç½®è¾“å‡ºå¢ç›Šï¼Œé»˜è®¤0.4</p>
<p>delays</p>
<p>è®¾ç½®å»¶è¿Ÿï¼Œå»¶è¿Ÿé€šå¸¸åœ¨40ms-60ms</p>
<p>decays</p>
<p>è®¾ç½®è¡°å‡</p>
<p>speeds</p>
<p>è®¾ç½®é€Ÿåº¦</p>
<p>depths</p>
<p>è®¾ç½®æ·±åº¦</p>
<p>ä¾‹å­</p>
<p>ä¸€ä¸ªå»¶è¿Ÿï¼ˆäºŒäººåˆå”±æ•ˆæœï¼‰</p>
<p><code>chorus=0.7:0.9:55:0.4:0.25:2</code></p>
<p>ä¸¤ä¸ªå»¶è¿Ÿï¼ˆä¸‰äººåˆå”±æ•ˆæœï¼‰</p>
<p><code>ffplay music.mp3 -af &quot;chorus=0.6:0.9:50|60:0.4|0.32:0.25|0.4:2|1.3&quot;</code></p>
<p>ä¸‰ä¸ªå»¶è¿Ÿï¼ˆå››äººåŠæ›´å¤šåˆå”±æ•ˆæœï¼‰</p>
<p><code>horus=0.5:0.9:50|60|40:0.4|0.32|0.3:0.25|0.4|0.3:2|2.3|1.3</code></p>
<h1 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h1>
<p><a href="https://blog.csdn.net/PYJTRK/article/details/122837821">FFMPEGå¸¸ç”¨å‘½ä»¤ï¼ˆä¸€ï¼‰ï¼šéŸ³è§†é¢‘ä¿¡æ¯ä¸æŠ½å–</a><br>
<a href="https://blog.csdn.net/PYJTRK/article/details/122843712">FFMPEGå¸¸ç”¨å‘½ä»¤ï¼ˆä¸‰ï¼‰ï¼šéŸ³é¢‘ç›¸å…³å‘½ä»¤</a><br>
<a href="https://blog.csdn.net/sinat_14826983/article/details/82975561">ffmpegå¸¸ç”¨éŸ³é¢‘å¤„ç†</a><br>
<a href="https://zhuanlan.zhihu.com/p/493712303">ä½¿ç”¨FFmpegæ·»åŠ ã€åˆ é™¤ã€æ›¿æ¢å’Œæå–è§†é¢‘ä¸­çš„éŸ³é¢‘</a><br>
<a href="https://www.cnblogs.com/CodeAndMoe/p/13360011.html">ğŸ”¨ FFmpeg æå–è§†é¢‘çš„éŸ³é¢‘ </a><br>
<a href="https://www.cnblogs.com/simadi/p/10649345.html">ffmpeg å¤šä¸ªéŸ³é¢‘åˆå¹¶ æˆªå– æ‹†åˆ†</a></p>

              </div>
              <hr class="clear">
              
                <div class="next-post">
                  <a class="purple-link" href="https://xiaxi626.github.io/post/ffmpeg-tu-pian-chu-li/">
                    <h3 class="post-title">
                      ä¸‹ä¸€ç¯‡ï¼šFFmpegå›¾ç‰‡å¤„ç†
                    </h3>
                  </a>
                </div>
                
            </div>
          </div>
      </div>

      
          <div id="gitalk-container"></div>
      

    
    </div>
    <div class="site-footer">
  <div class="social-container">
    
      
        <a href="https://github.com/xiaxi626" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      
    
      
    
      
    
      
    
      
        <a href="https://space.bilibili.com/328031473/bangumi" target="_blank">
          <i class="fab fa-bilibili"></i>
        </a>
      
    
      
        <a href="https://www.zhihu.com/people/xiao-yan-shi-36" target="_blank">
          <i class="fab fa-zhihu"></i>
        </a>
      
    
  </div>
  <div class="slogan">æ¸©æ•…è€ŒçŸ¥æ–°</div> |
  <a href="https://github.com/Decade-qiu/gridea-theme-Eternal" target="_blank">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></a> | <a href="https://github.com/Decade-qiu/gridea-theme-Eternal" target="_blank">Powered by Eternal</a> | <a href="https://xiaxi626.github.io/atom.xml" target="_blank">RSS</a>
</div>

    <script src="https://xiaxi626.github.io/media/scripts/index.js"></script>


    <script src='https://xiaxi626.github.io/media/scripts/valine.min.js'></script>
    <script>
        new Valine({
            el: '#gitalk-container',
            appId: '2EhI3kZCg0PpwHaW4CRpwsYu-gzGzoHsz',
            appKey: 'XEh9nruDRqlHqqfaFkHmeyKq',
            placeholder: 'Write something...',
        })
    </script>



  </body>
</html>

<script>
    window.onload = function() {
        let id = 1;
        let post_content = document.querySelector('.content-card');
        post_content.querySelectorAll('h1,h2,h3,h4,h5,h6').forEach(function (item) {
            item.setAttribute('id', 'toc-' + id);
            id++;
        });
        tocbot.init({
            tocSelector: '.toc',
            contentSelector: '.post-content',
            headingSelector: 'h1,h2,h3,h4',
            headingsOffset: 58,
        });
        // æ£€æµ‹é¡µé¢æ»šåŠ¨è·ç¦» ç”¨eventlistener
        window.addEventListener('scroll', function () {
            let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            let toc = document.querySelector('.toc');
            let tocBtn = document.querySelector('.toc-body');
            if (scrollTop > 250) {
                tocBtn.classList.add('toc-body-fixed');
                toc.classList.add('toc-fixed');
            } else {
                tocBtn.classList.remove('toc-body-fixed');
                toc.classList.remove('toc-fixed');
            }
        });
        document.querySelector('#floating-toc-btn').addEventListener('click', function () {
            let toc = document.querySelector('.toc-body');
            let main = document.querySelector('.main');
            if (toc.classList.contains('hide')) {
                main.classList.add('main-small');
                toc.classList.remove('hide');
            } else {
                toc.classList.add('hide');
                main.classList.remove('main-small');
            }
        });
        window.addEventListener('resize', function() {
            // è·å–å±å¹•å®½åº¦
            var screenWidth = window.innerWidth || document.documentElement.clientWidth;
            // è®¾ç½® .content-card çš„ max-width
            var contentCard = document.querySelector('.content-card');
            contentCard.style.maxWidth = screenWidth + 'px';
        });
        // åˆå§‹åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œç¡®ä¿åˆå§‹çŠ¶æ€ä¸‹ä¹Ÿè®¾ç½®æ­£ç¡®
        window.dispatchEvent(new Event('resize'));
    };
</script>
